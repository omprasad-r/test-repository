Drupal Gardens Site Duplication
===================================
last updated: 7/22/2011
by: Bryan Hirsch


About
-----------------------------------
This module is responsible for "duplicating" Gardens sites. It is enabled by Gardener during site duplication (install_gardens.inc), it scrubs the database, and then disabled. 
The idea with site duplication is to treat the Gardens site like a template (similar to an install profile). Content should be removed and configuration should be kept. But there are also special cases, for example, content generated by certain users is kept. And certain users are kept. The special rules about what gets kept are outlined below. This file also attempts to outline, module-by-module, what configuration should be kept.

Tables and variables to be scrubbed on site duplication are flagged with an asterisk (*). 


Maintenance
-----------------------------------
As additional modules are added to the code base, please update the lists of modules and logic below.


Special Rules
-----------------------------------
- OpenID-linked user accounts with the role "site owner" or "administrator"
should be copied to the new site, along with any content they created.


Modules in docroot/modules/acquia
-----------------------------------
blog_template

campaign_template

gardens_client

gardens_cron
  Code only, nothing to scrub.

gardens_duplication

gardens_help

gardens_limits
  Variables: 
  - gardens_limits_notification_bits *
    (limits to the number of users, storage, and webforms per site)

gardens_migrate
  Not in production yet.

gardens_misc

gardens_preproduction
  Code only, nothing to scrub.

jsunit

migrate 
  Not in production yet.

migrate_drupal
  Not in production yet.

migrate_extras
  Not in production yet.

oauth
  Tables:
  - oauth_common_consumer
  - oauth_common_provider_consumer

product_template

scarecrow

site_export

site_template

site_theme_settings

siteinfo

themebuilder

thumbgen

toolbar_prototype
  Code only, nothing to scrub.

wordpress_migrate
  Not in production yet.


docroot/sites/all/modules
-----------------------------------
acquia_connector

addthis

backports
  Code only, nothing to scrub.

block_everything
  Variables modified by this module:
  - site_name
  - site_slogan
  - theme_settings

comment_notify

contextual_flyout_links
  Code only, nothing to scrub.

ctools
  Tables:
  - ctools_css_cache
  - ctools_object_cache

date
  Tables:
  - date_format_locale
  - date_format_type 
  - date_formats

dialog
  Code only, nothing to scrub.

feedback
  Code only, nothing to scrub.

filter_tips_dialog
  Code only, nothing to scrub.

fivestar
  Variables:
  - fivestar_tags

flexible_blogs
  Variables:
  - flexible_blogs_node_link_type

follow
  Tables:
  - follow_links

font_management
  Variables: 
  - font_management_webfonts_free
  - font_management_webfonts_token
  - font_management_webfonts_project
  - font_management_webfonts_enable
  - font_management_typekit_enable
  - font_management_typekit_key

form_builder
  Tables:
  - form_builder_cache

gardens_features

google_analytics

htmlpurifier

libraries

logintoboggan_email_login

mailing_list

media

media_browser_plus
  Code only, nothing to scrub.

media_gallery
  Tables:
  - media_gallery_weight
  Variables:
  - media_gallery_collection_vid
  - media_gallery_default_collection_tid
  - node_submitted_media_gallery
  - node_options_media_gallery
  - comment_media_gallery
  Content:
  - Fall back on role rules, delete depending on who created it

media_youtube
  Code only, nothing to scrub.

mollom

multiform

options_element
  Code only, nothing to scrub.

pathauto

plupload
  Code only, nothing to scrub.

rotating_banner

save_draft
  Code only, nothing to scrub.

simpleviews

simplified_menu_admin
  Code only, nothing to scrub.

simplified_modules
  Code only, nothing to scrub.

site_verify

sqbs

styles

token
  Tables:
  - cache_token

typekit

ux_elements
  Code only, nothing to scrub.

views
  Everything in views is considered "configuration" as far as
  Drupal Gardens is concerned. Don't scrub anything.
  Tables: 
  - cache_views
  - cache_views_data
  - views_display
  - views_view

votingapi
  Tables:
  - votingapi_vote *
  - votingapi_cache *
  Variables:
  - votingapi_last_cron *
  - votingapi_anonymous_window
  - votingapi_calculation_schedule

webform
  Webforms are configuration, like views. Keep them.
  But data submitted via webforms should be scrubbed.
  Tables:
  - webform_component
  - webform_emails
  - webform_roles
  - webform_submissions *
  - webform_submitted_data * 
  Variables: 
  - webform_blocks
  - webform_csv_delimiter
  - webform_default_format
  - webform_default_from_address
  - webform_default_from_name
  - webform_default_subject
  - webform_disabled_components
  - webform_email_address_format
  - webform_export_format
  - webform_format_override
  - webform_node_types
  - webform_submission_access_control
  - webform_use_cookies

webform_alt_ui
  Variables modified by this module:
  - webform_csv_delimiter
  - comment_webform
  - addthis_nodetype_webform
  - node_submitted_webform

wysiwyg

xmlsitemap
