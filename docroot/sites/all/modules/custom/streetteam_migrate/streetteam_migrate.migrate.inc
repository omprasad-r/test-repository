<?php

/**
 * Migration class to import street team members from the st_users table.
 */
class StreetTeamMigration extends Migration {
  /**
   * Role ID of the 'street team member' role.
   *
   * @var int
   */
  protected $street_team_role;

  /**
   * List of countries allowed by field_country (i.e., the country names
   * we must match against).
   *
   * @var array
   */
  protected $countries = array();

  /**
   * If prepareRow() can't resolve a country name, the informational message
   * is stored here so prepare() can save it.
   *
   * @var string
   */
  protected $countryMessage = '';

  /**
   * Migration constructor - set up field mappings etc.
   */
  public function __construct() {
    parent::__construct(MigrateGroup::getInstance('warner'));
    $this->description = t('Merge Street Team into Fueled By Ramen');

    $this->map = new MigrateSQLMap($this->machineName,
        array('userid' => array(
              'type' => 'int',
              'unsigned' => TRUE,
              'not null' => TRUE,
              )
             ),
        MigrateDestinationUser::getKeySchema()
    );

    $fields = array(
      'full_name' => 'Constructed from first and last names in source row',
    );

    // Get all active users
    $query = db_select('st_user', 'stu')
             ->fields('stu', array('userid', 'email', 'password', 'first',
               'last', 'street', 'city', 'state', 'zip', 'country', 'newsletter',
               'active'))
             ->condition('active', '1');
    $this->source = new MigrateSourceSQL($query, $fields);
    // Flag that the incoming passwords are MD5, so they get hashed correctly
    $this->destination = new MigrateDestinationUser(
      array('md5_passwords' => TRUE));

    // Won't actually use the Drupal username - just make sure there are no dupes
    $this->addFieldMapping('name', 'full_name')
         ->dedupe('users', 'name')
         ->description('Construct from first and last in prepareRow');
    $this->addFieldMapping('mail', 'email');
    $this->addFieldMapping('field_member_name', 'full_name');
    $this->addFieldMapping('field_nickname', 'full_name');
    $this->addFieldMapping('status', 'active');
    $this->addFieldMapping('pass', 'password');
    $this->addFieldMapping('field_street_address', 'street');
    $this->addFieldMapping('field_city', 'city');
    $this->addFieldMapping('field_state', 'state');
    $this->addFieldMapping('field_postal_code', 'zip');
    $this->addFieldMapping('field_country', 'country');
    $this->addFieldMapping(NULL, 'first');
    $this->addFieldMapping(NULL, 'last');

    $this->street_team_role = db_select('role', 'r')
                              ->fields('r', array('rid'))
                              ->condition('name', 'street team member')
                              ->execute()
                              ->fetchField();
    $this->addFieldMapping('roles')
         ->defaultValue($this->street_team_role);

    // Unmapped destination fields
    $this->addUnmigratedDestinations(array('theme', 'signature', 'signature_format',
      'access', 'init', 'path', 'pathauto', 'timezone', 'language', 'is_new',
      'created', 'login', 'field_type', 'field_profile_updated', 'field_usage_type',
      'field_birthdate', 'field_eos_id', 'field_site_id', 'picture',
      'field_member_name:format', 'field_member_name:language',
      'field_site_id:format', 'field_site_id:language',
      'field_postal_code:format', 'field_postal_code:language',
      'field_about_me', 'field_about_me:format', 'field_about_me:language',
      'field_city:format', 'field_city:language',
      'field_state:format', 'field_state:language', 'field_gender',
      'field_hobbies', 'field_hobbies:format', 'field_hobbies:language',
      'field_favorite_bands', 'field_favorite_bands:format', 'field_favorite_bands:language',
      'field_nickname:format', 'field_nickname:language',
      'field_twitter_name', 'field_twitter_name:format', 'field_twitter_name:language',
      'field_provider', 'field_provider:format', 'field_provider:language',
      'field_comment', 'migrate_redirects'));

    // Unmapped source fields
    $this->addUnmigratedSources(array('newsletter'));

    // Get the list of valid countries, and make sure the keys are
    // lower-case to simplify matching
    $field = field_read_field('field_country');
    $countries = $field['settings']['allowed_values'];
    foreach ($countries as $key => $value) {
      $this->countries[drupal_strtolower($key)] = $value;
    }
  }

  /**
   * Implements Migration::prepareRow().
   *
   * @param $row
   *
   * @return bool
   */
  public function prepareRow($row) {
    // If an account already exists, skip it on initial insert, but apply
    // the street team role
    if (empty($row->migrate_map_destid1)) {
      $uid = db_select('users', 'u')
                  ->fields('u', array('uid'))
                  ->condition('mail', $row->email)
                  ->execute()
                  ->fetchField();
      if ($uid) {
        db_merge('users_roles')
          ->key(array(
                     'rid' => $this->street_team_role,
                     'uid' => $uid,
                ))
          ->execute();
        return FALSE;
      }
    }

    // Construct a full name, to be assigned to our various name fields.
    $row->full_name = trim(trim($row->first) . ' ' . trim($row->last));

    $this->countryMessage = '';
    $lower_country = drupal_strtolower($row->country);
    // Falls through if the country is already valiid
    if (!isset($this->countries[$lower_country])) {
      // If not, see if we've got a mapping from this string to a proper
      // country name
      if (isset($this->countryFixups[$lower_country])) {
        $row->country = $this->countryFixups[$lower_country];
      }
      else {
        // Record the miss - we don't have the context for saveMessage
        // here, so save it for prepare()
        $this->countryMessage = t('Could not resolve country !country',
          array('!country' => $row->country));
      }
    }
  }

  /**
   * Implements Migration::prepare().
   *
   * @param $account
   * @param $row
   */
  public function prepare($account, $row) {
    // Save any unresolved country message
    if ($this->countryMessage) {
      $this->saveMessage($this->countryMessage, MigrationBase::MESSAGE_INFORMATIONAL);
    }

    // Workaround for http://drupal.org/node/1358318 - prevent re-deduping
    // (assumes usernames are not changed in source)
    if (isset($account->uid)) {
      $account->name = db_select('users', 'u')
                       ->fields('u', array('name'))
                       ->condition('uid', $account->uid)
                       ->execute()
                       ->fetchField();
    }
    // All characters stripped from original, take from email
    else if (!$account->name) {
      $account->name = strtok($account->mail, '@');
      if (!$account->name) {
        $account->name = $account->mail;
      }
      // Dedupe
      $account->name = $this->handleDedupe(array('table' => 'users',
        'column' => 'name'), $account->name, NULL);
    }
  }

  /**
   * Mapping from random free-form country strings to valid field_country values.
   *
   * @var array
   */
  protected $countryFixups = array(
    'agentina'                => 'Argentina',
    'argentinean'             => 'Argentina',
    'argetina'                => 'Argentina',
    'auatralia'               => 'Australia',
    'auckland'                => 'Australia',
    'aus      '               => 'Australia',
    'ausrtalia'               => 'Australia',
    'austaila'                => 'Australia',
    'austalia'                => 'Australia',
    'austra;ia'               => 'Australia',
    'austraial'               => 'Australia',
    'austraila'               => 'Australia',
    'austrailia'              => 'Australia',
    'austrakia'               => 'Australia',
    'australaia'              => 'Australia',
    'australias'              => 'Australia',
    'australia\\'             => 'Australia',
    'australlia'              => 'Australia',
    'austrlaia'               => 'Australia',
    'austrlia'                => 'Australia',
    'autsralia'               => 'Australia',
    'melbourne'               => 'Australia',
    'queensland'              => 'Australia',
    'sydney'                  => 'Australia',
    'vienna / austria'        => 'Austria',
    'antwerpen'               => 'Belgium',
    'belgie'                  => 'Belgium',
    'belgië'                  => 'Belgium',
    'belgique'                => 'Belgium',
    'belguim'                 => 'Belgium',
    'bosnia and herzegovina'  => 'Bosnia & Herzegovina',
    'brasil'                  => 'Brazil',
    'brazilian'               => 'Brazil',
    'brazill'                 => 'Brazil',
    'são paulo'               => 'Brazil',
    'brunei'                  => 'Brunei Darussalam',
    'alberta'                 => 'Canada',
    'calgary'                 => 'Canada',
    'canaa'                   => 'Canada',
    'canad'                   => 'Canada',
    'canada (québec)'         => 'Canada',
    'canada!'                 => 'Canada',
    'canada!!'                => 'Canada',
    'canada!!!'               => 'Canada',
    'canade'                  => 'Canada',
    'cananda'                 => 'Canada',
    'canda'                   => 'Canada',
    'candaa'                  => 'Canada',
    'candad'                  => 'Canada',
    'canida'                  => 'Canada',
    'cannada'                 => 'Canada',
    'cnada'                   => 'Canada',
    'cnanda'                  => 'Canada',
    'montreal'                => 'Canada',
    'ontario'                 => 'Canada',
    'ottawa'                  => 'Canada',
    'qu√©bec'                 => 'Canada',
    'quebec'                  => 'Canada',
    'québec'                  => 'Canada',
    'vancouver'               => 'Canada',
    'winnipeg'                => 'Canada',
    'chilee'                  => 'Chile',
    'santiago'                => 'Chile',
    'bogotá'                  => 'Colombia',
    'colmbia'                 => 'Colombia',
    'cook'                    => 'Cook Islands',
    'croatia'                 => 'Croatia (Hrvatska)',
    'danmark'                 => 'Denmark',
    'denmark.'                => 'Denmark',
    'republica dominicana'    => 'Dominican Republic',
    'el salvaodr'             => 'El Salvador',
    'finland/ suomi'          => 'Finland',
    'finnland'                => 'Finland',
    'suomi'                   => 'Finland',
    'suomi finland'           => 'Finland',
    'francia'                 => 'France',
    'marseille'               => 'France',
    'paris'                   => 'France',
    'seine et marne'          => 'France',
    'seine st denis'          => 'France',
    'bavaria'                 => 'Germany',
    'berlin'                  => 'Germany',
    'brandenburg'             => 'Germany',
    'deutschland'             => 'Germany',
    'dresden'                 => 'Germany',
    'germany/ us army'        => 'Germany',
    'germanz'                 => 'Germany',
    'germay'                  => 'Germany',
    'gernany'                 => 'Germany',
    'guam,usa'                => 'Guam',
    'guatamula'               => 'Guatemala',
    'guatemala city'          => 'Guatemala',
    'hong kong, china'        => 'Hong Kong',
    'hongkong'                => 'Hong Kong',
    'budapest'                => 'Hungary',
    'icelandi'                => 'Iceland',
    'india (dumbass)'         => 'India',
    'jakarta'                 => 'Indonesia',
    'jakarta raya'            => 'Indonesia',
    'iraq dumbass'            => 'Iraq',
    'cork'                    => 'Ireland',
    'ìreland'                 => 'Ireland',
    'ìreland.'                => 'Ireland',
    'rep.ireland'             => 'Ireland',
    'repblic of ireland'      => 'Ireland',
    'republic of ireland'     => 'Ireland',
    'florence'                => 'Italy',
    'italia'                  => 'Italy',
    'rome'                    => 'Italy',
    'sicilia'                 => 'Italy',
    'korea'                   => 'Korea (South)',
    'korea, republic of'      => 'Korea (South)',
    'rep.of korea'            => 'Korea (South)',
    'seoul, korea'            => 'Korea (South)',
    'south korea'             => 'Korea (South)',
    'latvija'                 => 'Latvia',
    'luxembourg/ europe'      => 'Luxembourg',
    'republic of macedonia'   => 'Macedonia',
    'kuala lumpur'            => 'Malaysia',
    'maylisia'                => 'Malaysia',
    'baja california'         => 'Mexico',
    'cd de mexico'            => 'Mexico',
    'chihuahua'               => 'Mexico',
    'ensenada baja california'=> 'Mexico',
    'guadalajara'             => 'Mexico',
    'guadalupe'               => 'Mexico',
    'maxico'                  => 'Mexico',
    'mexcio'                  => 'Mexico',
    'mexco'                   => 'Mexico',
    'mexica'                  => 'Mexico',
    'méxico'                  => 'Mexico',
    'mexico city'             => 'Mexico',
    'méxico city'             => 'Mexico',
    'mexico df'               => 'Mexico',
    'mexico!'                 => 'Mexico',
    'mexoco'                  => 'Mexico',
    'monterrey'               => 'Mexico',
    'nexico'                  => 'Mexico',
    'tijuana'                 => 'Mexico',
    'yucatan'                 => 'Mexico',
    'republic of moldova'     => 'Moldova',
    'morrocco'                => 'Morocco',
    'mozambique'              => 'Mozambique',
    'burma'                   => 'Myanmar',
    'holland'                 => 'Netherlands',
    'holland/the netherlands' => 'Netherlands',
    'nederland'               => 'Netherlands',
    'netherland'              => 'Netherlands',
    'netherlands.'            => 'Netherlands',
    'ntherlands'              => 'Netherlands',
    'the  netherlands'        => 'Netherlands',
    'the neterlands'          => 'Netherlands',
    'the neth'                => 'Netherlands',
    'the netherlands'         => 'Netherlands',
    'the netherlands (europe)'=> 'Netherlands',
    'neterlands antilles'     => 'Netherlands Antilles',
    'new zealands'            => 'New Zealand',
    'new zelanad'             => 'New Zealand',
    'new zeland'              => 'New Zealand',
    'new zeraland'            => 'New Zealand',
    'newzealand'              => 'New Zealand',
    'nz'                      => 'New Zealand',
    'nz/tw'                   => 'New Zealand',
    'norwy'                   => 'Norway',
    'oman (middle east)'      => 'Oman',
    'paksitan'                => 'Pakistan',
    'panam√°'                 => 'Panama',
    'panamá'                  => 'Panama',
    'perú'                    => 'Peru',
    'phi;ippines'             => 'Philippines',
    'philiipines'             => 'Philippines',
    'philipines'              => 'Philippines',
    'philipphines'            => 'Philippines',
    'philippine'              => 'Philippines',
    'philippinea'             => 'Philippines',
    'philippines'             => 'Philippines',
    'philipppines'            => 'Philippines',
    'philliphines'            => 'Philippines',
    'phillipines'             => 'Philippines',
    'phillippines'            => 'Philippines',
    'philpipines'             => 'Philippines',
    'philppines'              => 'Philippines',
    'phiulipines'             => 'Philippines',
    'phlippines'              => 'Philippines',
    'phllipines'              => 'Philippines',
    'the philippines'         => 'Philippines',
    'polandowo'               => 'Poland',
    'polska'                  => 'Poland',
    'potugal'                 => 'Portugal',
    'russia'                  => 'Russian Federation',
    'singapoe'                => 'Singapore',
    'singapore.'              => 'Singapore',
    'slovakia'                => 'Slovakia (Slovak Rep)',
    'sylovakia'               => 'Slovakia (Slovak Rep)',
    'slovenija'               => 'Slovenia',
    'slovenija, europe'       => 'Slovenia',
    'sout afrika'             => 'South Africa',
    'south afirca'            => 'South Africa',
    'south-africa'            => 'South Africa',
    'southafrica'             => 'South Africa',
    'españa'                  => 'Spain',
    'madrid'                  => 'Spain',
    'spain / espa√±a'         => 'Spain',
    'spain / españa'          => 'Spain',
    'mellerud/sweden'         => 'Sweden',
    'stockholm'               => 'Sweden',
    'sverige'                 => 'Sweden',
    'swden'                   => 'Sweden',
    'geneva'                  => 'Switzerland',
    'suisse'                  => 'Switzerland',
    'swiss'                   => 'Switzerland',
    'damascus'                => 'Syria',
    'turkiye'                 => 'Turkey',
    'türkiye'                 => 'Turkey',
    'turks and caicos islands'=> 'Turks and Caicos Is',
    'ukrain'                  => 'Ukraine',
    'ukrainw'                 => 'Ukraine',
    'u.a.e'                   => 'United Arab Emirates',
    'uae'                     => 'United Arab Emirates',
    'united arab emirate'     => 'United Arab Emirates',
    'united arab emirated'    => 'United Arab Emirates',
    'united arab emirates'    => 'United Arab Emirates',
    'united arabemirates'     => 'United Arab Emirates',
    'britain'                 => 'United Kingdom',
    'britan'                  => 'United Kingdom',
    'brittain'                => 'United Kingdom',
    'cambridgshire'           => 'United Kingdom',
    'channel islands'         => 'United Kingdom',
    'channel islands, united kingdom' => 'United Kingdom',
    'derbyshire'              => 'United Kingdom',
    'east sussex'             => 'United Kingdom',
    'east yorkshire'          => 'United Kingdom',
    'ebgland'                 => 'United Kingdom',
    'egland'                  => 'United Kingdom',
    'endgland'                => 'United Kingdom',
    'endland'                 => 'United Kingdom',
    'eng;and'                 => 'United Kingdom',
    'engaland'                => 'United Kingdom',
    'engalnd'                 => 'United Kingdom',
    'engerlandd'              => 'United Kingdom',
    'engl'                    => 'United Kingdom',
    'englahd'                 => 'United Kingdom',
    'englamd'                 => 'United Kingdom',
    'englan'                  => 'United Kingdom',
    'england'                 => 'United Kingdom',
    'england !'               => 'United Kingdom',
    'england (u.k.)'          => 'United Kingdom',
    'england (uk)'            => 'United Kingdom',
    'england (united kingdom)'=> 'United Kingdom',
    'england , uk'            => 'United Kingdom',
    'england , united kingdom'=> 'United Kingdom',
    'england ,uk'             => 'United Kingdom',
    'england - united kingdom'=> 'United Kingdom',
    'england / united kingdom'=> 'United Kingdom',
    'england u.k'             => 'United Kingdom',
    'england uk'              => 'United Kingdom',
    'england!'                => 'United Kingdom',
    'england, great britain'  => 'United Kingdom',
    'england, u.k'            => 'United Kingdom',
    'england, u.k.'           => 'United Kingdom',
    'england, uk'             => 'United Kingdom',
    'england, united kindom'  => 'United Kingdom',
    'england, united kingdom' => 'United Kingdom',
    'england,uk'              => 'United Kingdom',
    'england,united kingdom'  => 'United Kingdom',
    'england. u.k'            => 'United Kingdom',
    'england. uk.'            => 'United Kingdom',
    'england/ uk'             => 'United Kingdom',
    'england/uk'              => 'United Kingdom',
    'englanda'                => 'United Kingdom',
    'englanf'                 => 'United Kingdom',
    'englang'                 => 'United Kingdom',
    'englank u.k'             => 'United Kingdom',
    'englans'                 => 'United Kingdom',
    'englend'                 => 'United Kingdom',
    'englend (uk)'            => 'United Kingdom',
    'english'                 => 'United Kingdom',
    'englnd'                  => 'United Kingdom',
    'englsnd'                 => 'United Kingdom',
    'enland'                  => 'United Kingdom',
    'enlgand'                 => 'United Kingdom',
    'gb'                      => 'United Kingdom',
    'glasgow'                 => 'United Kingdom',
    'great britain'           => 'United Kingdom',
    'great britain (uk)'      => 'United Kingdom',
    'great britan'            => 'United Kingdom',
    'great britian'           => 'United Kingdom',
    'great briton'            => 'United Kingdom',
    'hampshire england'       => 'United Kingdom',
    'isle of man'             => 'United Kingdom',
    'lancashire'              => 'United Kingdom',
    'london'                  => 'United Kingdom',
    'london, england'         => 'United Kingdom',
    'north wales'             => 'United Kingdom',
    'north wales, uk'         => 'United Kingdom',
    'north yorkshire'         => 'United Kingdom',
    'n ireland'               => 'United Kingdom',
    'n. ireland'              => 'United Kingdom',
    'n.ireland'               => 'United Kingdom',
    'norhtern ireland'        => 'United Kingdom',
    'northen ireland'         => 'United Kingdom',
    'northern ireland'        => 'United Kingdom',
    'northern ireland, u.k'   => 'United Kingdom',
    'northern ireland, uk'    => 'United Kingdom',
    'northern ireland,united kingdom' => 'United Kingdom',
    'nothern ireland'         => 'United Kingdom',
    's.wales'                 => 'United Kingdom',
    's/wales'                 => 'United Kingdom',
    'scoland'                 => 'United Kingdom',
    'scotalnd'                => 'United Kingdom',
    'scotand'                 => 'United Kingdom',
    'scotland'                => 'United Kingdom',
    'scotland uk'             => 'United Kingdom',
    'scotland!'               => 'United Kingdom',
    'scotland, u.k'           => 'United Kingdom',
    'scotland, uk'            => 'United Kingdom',
    'scotland, united kingdom'=> 'United Kingdom',
    'scotland,uk'             => 'United Kingdom',
    'scotland.'               => 'United Kingdom',
    'scotland// united kingdom' => 'United Kingdom',
    'scotland/uk'             => 'United Kingdom',
    'scotland/united kingdom' => 'United Kingdom',
    'scotland:united kingdom' => 'United Kingdom',
    'scotlans'                => 'United Kingdom',
    'sctoland'                => 'United Kingdom',
    'south east wales'        => 'United Kingdom',
    'south wales'             => 'United Kingdom',
    'south wales, uk'         => 'United Kingdom',
    'south yorkshire'         => 'United Kingdom',
    'south yorksire'          => 'United Kingdom',
    'south yorokshire'        => 'United Kingdom',
    'southyorkshire'          => 'United Kingdom',
    'the united kingdom'      => 'United Kingdom',
    'u. k'                    => 'United Kingdom',
    'u.k'                     => 'United Kingdom',
    'u.k.'                    => 'United Kingdom',
    'uk'                      => 'United Kingdom',
    'uk (england)'            => 'United Kingdom',
    'uk#k'                    => 'United Kingdom',
    'uk, england'             => 'United Kingdom',
    'uk- england'             => 'United Kingdom',
    'uk.'                     => 'United Kingdom',
    'uk/northern ireland'     => 'United Kingdom',
    'un&#305;ted k&#305;ngdom'=> 'United Kingdom',
    'unied kingdom'           => 'United Kingdom',
    'uniked kingdom'          => 'United Kingdom',
    'uninted kingdom'         => 'United Kingdom',
    'unired kingdom'          => 'United Kingdom',
    'unitd kingdom'           => 'United Kingdom',
    'united  kingdom'         => 'United Kingdom',
    'united ingdom'           => 'United Kingdom',
    'united kigdom'           => 'United Kingdom',
    'united kigndom-'         => 'United Kingdom',
    'united kindgdom'         => 'United Kingdom',
    'united kindgom'          => 'United Kingdom',
    'united kindom'           => 'United Kingdom',
    'united kindon'           => 'United Kingdom',
    'united kingdim'          => 'United Kingdom',
    'united kingdm'           => 'United Kingdom',
    'united kingdom (england)'=> 'United Kingdom',
    'united kingdom (mainland)' => 'United Kingdom',
    'united kingdom (wales)'  => 'United Kingdom',
    'united kingdom - england'=> 'United Kingdom',
    'united kingdom / england'=> 'United Kingdom',
    'united kingdom north wales' => 'United Kingdom',
    'united kingdom, england' => 'United Kingdom',
    'united kingdom, wales'   => 'United Kingdom',
    'united kingdom.'         => 'United Kingdom',
    'united kingdom/england'  => 'United Kingdom',
    'united kingdon'          => 'United Kingdom',
    'united kingdoom'         => 'United Kingdom',
    'united kingdrom'         => 'United Kingdom',
    'united kingom'           => 'United Kingdom',
    'united kingtom'          => 'United Kingdom',
    'united kinhdom'          => 'United Kingdom',
    'united kngdom'           => 'United Kingdom',
    'united unkingdom'        => 'United Kingdom',
    'unitedd kingdom'         => 'United Kingdom',
    'unitede kingdom'         => 'United Kingdom',
    'unitend kingdom'         => 'United Kingdom',
    'unites kingdom'          => 'United Kingdom',
    'unitied kingdom'         => 'United Kingdom',
    'untied kindom'           => 'United Kingdom',
    'untied kingdom'          => 'United Kingdom',
    'untited kingdom'         => 'United Kingdom',
    'wales'                   => 'United Kingdom',
    'wales (u.k)'             => 'United Kingdom',
    'wales (uk)'              => 'United Kingdom',
    'wales - uk'              => 'United Kingdom',
    'wales boiiii'            => 'United Kingdom',
    'wales u.k'               => 'United Kingdom',
    'wales uk'                => 'United Kingdom',
    'wales, g.b.'             => 'United Kingdom',
    'wales, u.k'              => 'United Kingdom',
    'wales, u.k.'             => 'United Kingdom',
    'wales, uk'               => 'United Kingdom',
    'wales, uk.'              => 'United Kingdom',
    'wales, united kingdom'   => 'United Kingdom',
    'wales,united kingdom'    => 'United Kingdom',
    'wales-uk'                => 'United Kingdom',
    'west midlands'           => 'United Kingdom',
    '"united" states'         => 'United States',
    'alabama'                 => 'United States',
    'albany'                  => 'United States',
    'amarica'                 => 'United States',
    'amercia'                 => 'United States',
    'amercica'                => 'United States',
    'america'                 => 'United States',
    'america (usa)'           => 'United States',
    'america!'                => 'United States',
    'american'                => 'United States',
    'americana'               => 'United States',
    'americe'                 => 'United States',
    'arizona'                 => 'United States',
    'az'                      => 'United States',
    'brooklyn'                => 'United States',
    'buffalo'                 => 'United States',
    'calfornia'               => 'United States',
    'califorina'              => 'United States',
    'califorinia'             => 'United States',
    'california'              => 'United States',
    'chicago'                 => 'United States',
    'cleveland'               => 'United States',
    'dakota'                  => 'United States',
    'dallas'                  => 'United States',
    'denver'                  => 'United States',
    'el paso'                 => 'United States',
    'erie'                    => 'United States',
    'estados unidos'          => 'United States',
    '√âtats-unis'             => 'United States',
    'florida'                 => 'United States',
    'fresno'                  => 'United States',
    'fuckin us'               => 'United States',
    'hawaii'                  => 'United States',
    'honolulu'                => 'United States',
    'houston'                 => 'United States',
    'idaho'                   => 'United States',
    'il'                      => 'United States',
    'illinios'                => 'United States',
    'illinoes'                => 'United States',
    'indiana'                 => 'United States',
    'iowa'                    => 'United States',
    'kansas'                  => 'United States',
    'kentucky'                => 'United States',
    'kentukey'                => 'United States',
    'la california'           => 'United States',
    'las vegas'               => 'United States',
    'los angeles'             => 'United States',
    'los angels'              => 'United States',
    'louisiana'               => 'United States',
    'madison'                 => 'United States',
    'manhattan'               => 'United States',
    'maryland'                => 'United States',
    'massachusetts'           => 'United States',
    'massuchusetts'           => 'United States',
    'miami'                   => 'United States',
    'michigan'                => 'United States',
    'minnesota'               => 'United States',
    'n.y'                     => 'United States',
    'n.y.'                    => 'United States',
    'nevada'                  => 'United States',
    'new england'             => 'United States',
    'new haven'               => 'United States',
    'new jersey'              => 'United States',
    'new london'              => 'United States',
    'new orleans'             => 'United States',
    'new york'                => 'United States',
    'new york city'           => 'United States',
    'newyork'                 => 'United States',
    'nj'                      => 'United States',
    'north america'           => 'United States',
    'north america (usa)'     => 'United States',
    'north carolina'          => 'United States',
    'ny'                      => 'United States',
    'oakland'                 => 'United States',
    'ohio'                    => 'United States',
    'oklahoma'                => 'United States',
    'oklahoma city'           => 'United States',
    'orange county'           => 'United States',
    'oregon'                  => 'United States',
    'orlando'                 => 'United States',
    'pennslyvania'            => 'United States',
    'pennsylvania'            => 'United States',
    'pennsylvannia'           => 'United States',
    'philadelphia'            => 'United States',
    'phoenix'                 => 'United States',
    'puerto rico'             => 'United States',
    'puerto rico (usa)'       => 'United States',
    'puerto rico, usa'        => 'United States',
    'puerto rico/us'          => 'United States',
    'rhode island'            => 'United States',
    'sacramento'              => 'United States',
    'salt lake'               => 'United States',
    'san antonio'             => 'United States',
    'san bernadino'           => 'United States',
    'san bernardino'          => 'United States',
    'san diego'               => 'United States',
    'san mateo'               => 'United States',
    'sandiego'                => 'United States',
    'santa barbara'           => 'United States',
    'santa catarina'          => 'United States',
    'santa cruz'              => 'United States',
    'seattle'                 => 'United States',
    'south carolina'          => 'United States',
    'st louis'                => 'United States',
    'st. louis'               => 'United States',
    'tampa'                   => 'United States',
    'tex'                     => 'United States',
    'texa'                    => 'United States',
    'texas'                   => 'United States',
    'the states'              => 'United States',
    'the u-s-of-a'            => 'United States',
    'the u.s'                 => 'United States',
    'the u.s.a.'              => 'United States',
    'the united fucking states of am.' => 'United States',
    'the united states'       => 'United States',
    'the united states of america' => 'United States',
    'the united states of america!' => 'United States',
    'the united states of american' => 'United States',
    'the us'                  => 'United States',
    'the us of izza'          => 'United States',
    'the us of the a'         => 'United States',
    'the usa!!'               => 'United States',
    'thee united states of america' => 'United States',
    'tucson'                  => 'United States',
    'tulsa'                   => 'United States',
    'tx'                      => 'United States',
    'u s'                     => 'United States',
    'u s a'                   => 'United States',
    'u s of a'                => 'United States',
    'u to the s to the a'     => 'United States',
    'u,s'                     => 'United States',
    'u,s,'                    => 'United States',
    'u,s,a'                   => 'United States',
    'u,s.a'                   => 'United States',
    'u. s'                    => 'United States',
    'u. s.'                   => 'United States',
    'u. s. a.'                => 'United States',
    'u. s. of a'              => 'United States',
    'u. s. of a!'             => 'United States',
    'u. s. of a.'             => 'United States',
    'u..s.a'                  => 'United States',
    'u..s.a.'                 => 'United States',
    'u.s'                     => 'United States',
    'u.s kentucky'            => 'United States',
    'u.s of a'                => 'United States',
    'u.s of a.'               => 'United States',
    'u.s virgin islands'      => 'United States',
    'u.s,'                    => 'United States',
    'u.s,a'                   => 'United States',
    'u.s,a.'                  => 'United States',
    'u.s.'                    => 'United States',
    'u.s. a'                  => 'United States',
    'u.s. and a'              => 'United States',
    'u.s. of a'               => 'United States',
    'u.s. of a.'              => 'United States',
    'u.s. of america'         => 'United States',
    'u.s..a.'                 => 'United States',
    'u.s.a'                   => 'United States',
    'u.s.a,'                  => 'United States',
    'u.s.a,.'                 => 'United States',
    'u.s.a.'                  => 'United States',
    'u.s.a.!'                 => 'United States',
    'u.s.a>'                  => 'United States',
    'u.s.ay'                  => 'United States',
    'u.s.of a'                => 'United States',
    'u.s.of a.'               => 'United States',
    'u>s.a.'                  => 'United States',
    'u>s>a'                   => 'United States',
    'uinited states'          => 'United States',
    'uinted states'           => 'United States',
    'uinted states of america'=> 'United States',
    'uited states'            => 'United States',
    'umited states'           => 'United States',
    'undited states'          => 'United States',
    'undited states of america' => 'United States',
    'uni.te.d. states'        => 'United States',
    'unied sates'             => 'United States',
    'unied sates of america'  => 'United States',
    'unied states'            => 'United States',
    'unied states of america' => 'United States',
    'uniied states'           => 'United States',
    'uninted staes'           => 'United States',
    'uninted stated'          => 'United States',
    'uninted states'          => 'United States',
    'uninted states of america' => 'United States',
    'unisted states'          => 'United States',
    'unisted states of america' => 'United States',
    'unit states'             => 'United States',
    'unitated states'         => 'United States',
    'unitd stated'            => 'United States',
    'unitd states'            => 'United States',
    'unitde states'           => 'United States',
    'unitded states of america' => 'United States',
    'unite states'            => 'United States',
    'unite states of america' => 'United States',
    'unite4d states'          => 'United States',
    'united  satates'         => 'United States',
    'united  states'          => 'United States',
    'united  states of america' => 'United States',
    'united dtates'           => 'United States',
    'united friggen states'   => 'United States',
    'united fuckin states'    => 'United States',
    'united fucking states'   => 'United States',
    'united of states of america' => 'United States',
    'united sataes'           => 'United States',
    'united satates'          => 'United States',
    'united satates of america' => 'United States',
    'united sate'             => 'United States',
    'united sated of america' => 'United States',
    'united sates'            => 'United States',
    'united sates of america' => 'United States',
    'united srates'           => 'United States',
    'united stades'           => 'United States',
    'united staed'            => 'United States',
    'united staes'            => 'United States',
    'united staes of americ'  => 'United States',
    'united staes of america' => 'United States',
    'united staets'           => 'United States',
    'united stages'           => 'United States',
    'united stanes'           => 'United States',
    'united stares'           => 'United States',
    'united stares of america'=> 'United States',
    'united startes'          => 'United States',
    'united stases of america'=> 'United States',
    'united stat es'          => 'United States',
    'united state'            => 'United States',
    'united state of america' => 'United States',
    'united statea'           => 'United States',
    'united statec'           => 'United States',
    'united stated'           => 'United States',
    'united stated of america'=> 'United States',
    'united stateds'          => 'United States',
    'united stateds of america' => 'United States',
    'united states  :p'       => 'United States',
    'united states  america'  => 'United States',
    'united states  of america' => 'United States',
    'united states !'         => 'United States',
    'united states / usa'     => 'United States',
    'united states america'   => 'United States',
    'united states baby'      => 'United States',
    'united states bitch'     => 'United States',
    'united states duhh'      => 'United States',
    'united states ff america'=> 'United States',
    'united states if america'=> 'United States',
    'united states o america' => 'United States',
    'united states of'        => 'United States',
    'united states of  america' => 'United States',
    'united states of a'      => 'United States',
    'united states of amaerica' => 'United States',
    'united states of amarica'=> 'United States',
    'united states of ameica' => 'United States',
    'united states of amercia' => 'United States',
    'united states of ameria' => 'United States',
    'united states of americ' => 'United States',
    'united states of america'=> 'United States',
    'united states of america ?' => 'United States',
    'united states of america!' => 'United States',
    'united states of america.' => 'United States',
    'united states of american' => 'United States',
    'united states of americe' => 'United States',
    'united states of americia' => 'United States',
    'united states of americq'=> 'United States',
    'united states of americs'=> 'United States',
    'united states of amerika'=> 'United States',
    'united states of ammurikah' => 'United States',
    'united states of amwrica'=> 'United States',
    'united states of anerica'=> 'United States',
    'united states of apathy' => 'United States',
    'united states of california' => 'United States',
    'united states of emerica'=> 'United States',
    'united states of hypocrisy (usa)' => 'United States',
    'united states of nebraska'=> 'United States',
    'united states of the americas' => 'United States',
    'united states of the milky way' => 'United States',
    'united states of war'    => 'United States',
    'united states or america'=> 'United States',
    'united states os america'=> 'United States',
    'united states!!'         => 'United States',
    'united states!!!'        => 'United States',
    'united states,'          => 'United States',
    'united states, the'      => 'United States',
    'united states.'          => 'United States',
    'united states.......'    => 'United States',
    'united states/north america' => 'United States',
    'united statese'          => 'United States',
    'united statesof america' => 'United States',
    'united states`'          => 'United States',
    'united stats'            => 'United States',
    'united stats of america' => 'United States',
    'united statses'          => 'United States',
    'united stattes'          => 'United States',
    'united status'           => 'United States',
    'united statws'           => 'United States',
    'united stes'             => 'United States',
    'united stetes'           => 'United States',
    'united stizates'         => 'United States',
    'united ststes'           => 'United States',
    'united ststes of america'=> 'United States',
    'united tates'            => 'United States',
    'united-states'           => 'United States',
    'uniteds states'          => 'United States',
    'uniteds states of america'=> 'United States',
    'unitedstaes'             => 'United States',
    'unitedstated'            => 'United States',
    'unitedstates'            => 'United States',
    'unitedstatesofamerica'   => 'United States',
    'unitedt states'          => 'United States',
    'unitedvstates'           => 'United States',
    'united_states'           => 'United States',
    'uniteed states'          => 'United States',
    'uniteg states'           => 'United States',
    'uniter states'           => 'United States',
    'uniterd states'          => 'United States',
    'unites sates'            => 'United States',
    'unites staes'            => 'United States',
    'unites state'            => 'United States',
    'unites states'           => 'United States',
    'unites states of america'=> 'United States',
    'unites states!!'         => 'United States',
    'unitesd states'          => 'United States',
    'unithed states'          => 'United States',
    'unitied states'          => 'United States',
    'unitied states of america' => 'United States',
    'unitred states'          => 'United States',
    'unitred states of america' => 'United States',
    'unitted states'          => 'United States',
    'unitwd states'           => 'United States',
    'unnited states of america' => 'United States',
    'unsited states'          => 'United States',
    'unted states'            => 'United States',
    'untided states'          => 'United States',
    'untied sates'            => 'United States',
    'untied staes'            => 'United States',
    'untied state'            => 'United States',
    'untied stated'           => 'United States',
    'untied states'           => 'United States',
    'untied states of ameria' => 'United States',
    'untied states of america'=> 'United States',
    'untied ststes of america'=> 'United States',
    'untited staes'           => 'United States',
    'untited stated'          => 'United States',
    'untited states'          => 'United States',
    'untited states of america'=> 'United States',
    'unuited estates'         => 'United States',
    'unuited states of america'=> 'United States',
    'unuted states'           => 'United States',
    'us'                      => 'United States',
    'us and a'                => 'United States',
    'us armed forces europe'  => 'United States',
    'us duh!'                 => 'United States',
    'us fucking a'            => 'United States',
    'us of a'                 => 'United States',
    'us of ahem!'             => 'United States',
    'us of the motherfuckin a'=> 'United States',
    'us united states'        => 'United States',
    'us(of)a'                 => 'United States',
    'us.'                     => 'United States',
    'usa'                     => 'United States',
    'usa (untied sandal association)' => 'United States',
    'usa ?'                   => 'United States',
    'usa all the way'         => 'United States',
    'usa baby'                => 'United States',
    'usa baby!'               => 'United States',
    'usa baby!!!!!!!!!!!!!!'  => 'United States',
    'usa duddde'              => 'United States',
    'USA duh'                 => 'United States',
    'usa motha fucka'         => 'United States',
    'usa mother fucker!'      => 'United States',
    'usa nigga'               => 'United States',
    'usa yo!'                 => 'United States',
    'usa!'                    => 'United States',
    'usa!!'                   => 'United States',
    'usa!!!'                  => 'United States',
    'usa, baby!!!'            => 'United States',
    'usa, new york'           => 'United States',
    'usa.'                    => 'United States',
    'usa1'                    => 'United States',
    'usa=)'                   => 'United States',
    'usa?'                    => 'United States',
    'usaa'                    => 'United States',
    'usaaaa'                  => 'United States',
    'usa`'                    => 'United States',
    'usfuckinay'              => 'United States',
    'usmotherfuckina'         => 'United States',
    'usoa'                    => 'United States',
    'usofa'                   => 'United States',
    'utah'                    => 'United States',
    'uuited states'           => 'United States',
    'uunited states'          => 'United States',
    'virginia'                => 'United States',
    'washigton'               => 'United States',
    'washington'              => 'United States',
    'washington county'       => 'United States',
    'winston salem'           => 'United States',
    'wisconsin'               => 'United States',
    'veenzuela'               => 'Venezuela',
    'venezuala'               => 'Venezuela',
    'venezuela?¬ø'            => 'Venezuela',
    'vietnam'                 => 'Viet Nam',
    'zimbabaw'                => 'Zimbabwe',
  );
}

/**
 * Implementation of hook_migrate_api.
 */
function streetteam_migrate_migrate_api() {
  $api = array(
    'api' => 2,
  );
  return $api;
}
